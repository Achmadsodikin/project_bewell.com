{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul\\\\Documents\\\\GitHub\\\\PWD-Pharma-2-JCWM01\\\\front_end\\\\src\\\\pages\\\\ProductDetail.jsx\";\nimport React from \"react\";\nimport Axios from \"axios\";\nimport { URL_API } from \"../helper\";\nimport { connect } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProductDetail extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      dbproduct: {},\n      quantity: 1,\n      productId: 0,\n      dbcart: []\n    };\n\n    this.getProduct = () => {\n      Axios.get(`${URL_API}/product/product-detail/${this.state.productId}`).then(res => {\n        this.setState({\n          dbproduct: res.data.results[0]\n        });\n      }).catch(err => {\n        alert(\"Cannot Get Product Data\");\n        console.log(err);\n      });\n    };\n\n    this.getCart = () => {\n      Axios.get(`${URL_API}/cart/get-user-cart/${this.props.userGlobal.id_user}`).then(res => {\n        this.setState({\n          dbcart: res.data.results\n        });\n      }).catch(err => {\n        alert(\"Cannot Get Cart Data\");\n        console.log(err);\n      });\n    };\n\n    this.qtyBtnHandler = action => {\n      if (action === \"increment\") {\n        this.setState({\n          quantity: this.state.quantity + 1\n        });\n      } else if (action === \"decrement\" && this.state.quantity > 1) {\n        this.setState({\n          quantity: this.state.quantity - 1\n        });\n      }\n    };\n\n    this.addToCartHandler = () => {\n      const findProduct = this.state.dbcart.find(val => val.id_product == this.state.productId);\n\n      if (findProduct) {\n        Axios.patch(`${URL_API}/cart/patch-cart`, {\n          cart_qty: this.state.quantity + findProduct.cart_qty,\n          id_cart: findProduct.id_cart\n        }).then(res => {\n          alert(\"Add Item's Quantity to Cart Succeed\");\n          this.getCart();\n        }).catch(err => {\n          alert(\"Add Item's Quantity to Cart Failed\");\n          console.log(err);\n        });\n      } else {\n        Axios.post(`${URL_API}/cart/add-cart/${this.props.userGlobal.id_user}`, {\n          id_product: this.state.productId,\n          cart_qty: this.state.quantity\n        }).then(res => {\n          alert(\"Add New Item to Cart Succeed\");\n          this.getCart();\n        }).catch(err => {\n          alert(\"Add New Item to Cart Failed\");\n          console.log(err);\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (window.location.pathname.length == 16) {\n      this.setState({\n        productId: parseInt(window.location.pathname.slice(16, 17))\n      });\n    } else {\n      this.setState({\n        productId: parseInt(window.location.pathname.slice(16, 18))\n      });\n    }\n\n    this.getCart();\n  }\n\n  componentDidUpdate() {\n    this.getProduct();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-6\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: \"100%\"\n            },\n            src: URL_API + this.state.dbproduct.product_image,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-6 d-flex flex-column justify-content-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: this.state.dbproduct.product_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\"Rp \", this.state.dbproduct.product_price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: this.state.dbproduct.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-row align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => this.qtyBtnHandler(\"decrement\"),\n              className: \"btn btn-primary mr-4\",\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this), this.state.quantity, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => this.qtyBtnHandler(\"increment\"),\n              className: \"btn btn-primary mx-4\",\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.addToCartHandler,\n            disabled: this.props.userGlobal.role !== \"user\",\n            className: \"btn btn-success mt-3\",\n            children: \"Add to cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userGlobal: state.user\n  };\n};\n\nexport default connect(mapStateToProps)(ProductDetail);","map":{"version":3,"sources":["C:/Users/Abdul/Documents/GitHub/PWD-Pharma-2-JCWM01/front_end/src/pages/ProductDetail.jsx"],"names":["React","Axios","URL_API","connect","ProductDetail","Component","state","dbproduct","quantity","productId","dbcart","getProduct","get","then","res","setState","data","results","catch","err","alert","console","log","getCart","props","userGlobal","id_user","qtyBtnHandler","action","addToCartHandler","findProduct","find","val","id_product","patch","cart_qty","id_cart","post","componentDidMount","window","location","pathname","length","parseInt","slice","componentDidUpdate","render","width","product_image","product_name","product_price","description","role","mapStateToProps","user"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Axios from \"axios\";\r\nimport { URL_API } from \"../helper\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass ProductDetail extends React.Component {\r\n  state = {\r\n    dbproduct: {},\r\n    quantity: 1,\r\n    productId: 0,\r\n    dbcart: []\r\n  }\r\n\r\n  getProduct = () => {\r\n    Axios.get(`${URL_API}/product/product-detail/${this.state.productId}`)\r\n    .then(res => {\r\n      this.setState({ dbproduct: res.data.results[0] })\r\n    })\r\n    .catch(err => {\r\n      alert(\"Cannot Get Product Data\")\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  getCart = () => {\r\n    Axios.get(`${URL_API}/cart/get-user-cart/${this.props.userGlobal.id_user}`)\r\n    .then(res => {\r\n      this.setState({ dbcart: res.data.results })\r\n    })\r\n    .catch(err => {\r\n      alert(\"Cannot Get Cart Data\")\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  qtyBtnHandler = (action) => {\r\n    if (action === \"increment\") {\r\n      this.setState({ quantity: this.state.quantity + 1 })\r\n    } else if (action === \"decrement\" && this.state.quantity > 1) {\r\n      this.setState({ quantity: this.state.quantity - 1 })\r\n    }\r\n  }\r\n\r\n  addToCartHandler = () => {\r\n    const findProduct = this.state.dbcart.find(val => val.id_product == this.state.productId)\r\n\r\n    if (findProduct) {\r\n      Axios.patch(`${URL_API}/cart/patch-cart`, {\r\n        cart_qty: this.state.quantity + findProduct.cart_qty,\r\n        id_cart: findProduct.id_cart\r\n      })\r\n      .then(res => {\r\n        alert(\"Add Item's Quantity to Cart Succeed\")\r\n        this.getCart()\r\n      })\r\n      .catch(err => {\r\n        alert(\"Add Item's Quantity to Cart Failed\")\r\n        console.log(err)\r\n      })\r\n    } else {\r\n      Axios.post(`${URL_API}/cart/add-cart/${this.props.userGlobal.id_user}`, {\r\n        id_product: this.state.productId,\r\n        cart_qty: this.state.quantity\r\n      })\r\n      .then(res => {\r\n        alert(\"Add New Item to Cart Succeed\")\r\n        this.getCart()\r\n      })\r\n      .catch(err => {\r\n        alert(\"Add New Item to Cart Failed\")\r\n        console.log(err)\r\n      })\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (window.location.pathname.length == 16) {\r\n      this.setState({ productId: parseInt(window.location.pathname.slice(16, 17)) })\r\n    } else {\r\n      this.setState({ productId: parseInt(window.location.pathname.slice(16, 18)) })\r\n    }\r\n    \r\n    this.getCart()\r\n  }\r\n  \r\n  componentDidUpdate() {\r\n    this.getProduct()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row mt-3\">\r\n          <div className=\"col-6\">\r\n            <img \r\n              style={{ width: \"100%\" }} \r\n              src={URL_API + this.state.dbproduct.product_image} \r\n              alt=\"\" \r\n            />\r\n          </div>\r\n          <div className=\"col-6 d-flex flex-column justify-content-center\">\r\n            <h4>{this.state.dbproduct.product_name}</h4>\r\n            <h5>Rp {this.state.dbproduct.product_price}</h5>\r\n            <p>\r\n              {this.state.dbproduct.description}\r\n            </p>\r\n            <div className=\"d-flex flex-row align-items-center\">\r\n              <button onClick={() => this.qtyBtnHandler(\"decrement\")} className=\"btn btn-primary mr-4\">\r\n                -\r\n              </button>\r\n              {this.state.quantity}\r\n              <button onClick={() => this.qtyBtnHandler(\"increment\")} className=\"btn btn-primary mx-4\">\r\n                +\r\n              </button>\r\n            </div>\r\n            <button onClick={this.addToCartHandler} disabled={this.props.userGlobal.role !== \"user\"} className=\"btn btn-success mt-3\">\r\n              Add to cart\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userGlobal: state.user,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ProductDetail);"]},"metadata":{},"sourceType":"module"}